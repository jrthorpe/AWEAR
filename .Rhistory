# Set the drive, load packages and functions.
setwd("M:/PhD_Folder/CaseStudies/Data_analysis/source")
# Load required packages:
library(data.table)
library(dtplyr)
library(dplyr)
library(magrittr)
library(lubridate)
library(ggplot2)
library(reshape2)
library(maptools)
library(plotly)
library(maps)
library(mapproj)
library(sp)
library(caTools)
# Load custom functions:
source("JRT_utils.R")
# Define constants:
folder <- "../../Data_dumps/dump_current_analysis/" # path to folder that holds multiple .csv files, downloaded from nightingale webportal
not.in.use <- c("bluetooth","hardware_info","wearable","wifi")
activity.selection <- c("Still", "Foot", "Vehicle", "Tilting", "Bicycle") # main activity types
to_plot <- c("activity",
"battery",
"exps",
"location",
"screen",
"steps")
users <- list(julia = "93a6d31c-e216-48d8-a9a2-f2f72362548d",
dean = "b1316280-38a6-45e1-9bb9-7afb2a1a2a96",
per = "7bf5fec3-f46f-419e-9573-001fe9b47d81",
verena = "a0c74a88-b293-4b31-92c0-967502b28132",
agzam = "52152dda-0f54-46d1-affa-6dea85f840dc",
anja = "36f9d061-c5e9-4f30-91b2-83351ff40288",
#P01FA = "6321f7ef-a958-44ad-b8e5-5aa04bc004e1",
P03JJ = "e9f44eb5-8962-4894-83c6-783025c6eaea",
P06SS = "f9f24838-c844-42d4-8343-b20ebdd220f3",
P07MG = "4fbfddd0-a346-41c8-be8d-f8804b5068d3",
P08UH = "a85f299e-7a09-4ba7-bc19-8a200c2686c2",
P10JL = "d05fa984-8d3b-4405-b417-211d1a3f50d6",
P13NB = "75cc5240-7805-4550-aeae-873df9984710")
# Select user
userid <- users$P03JJ
# Set period of interest
d.start <- as.POSIXct("2018-04-25") # yyyy-mm-dd
d.stop <- as.POSIXct("2018-05-09")
cat("This report is for user ", names(users[users==userid]), "for the time period from ", as.character(d.start), " to ", as.character(d.stop))
datasets.all <- get.data(folder, not.in.use) %>%
lapply(restructure, userid, d.start, d.stop)
datasets.all <- Filter(function(x) !is.null(x)[1],datasets.all) # remove any null dataframes
#test<-filter(datasets.all$activity, user=="f9f24838-c844-42d4-8343-b20ebdd220f3")
for (i in 1:length(datasets.all)){
j <- datasets.all[[i]]
if(!is.null(j)){
cat("Data in ",names(datasets.all)[i],"comes from ", distinct(j,dsource)[,1],"\n");
cat("Last reading in",names(datasets.all)[i],"is on",capture.output(max(j$timestamp)),"\n\n");
}
}
results<-show_plots(datasets.all, to_plot)
for(i in 1:length(results)){
print(results[[i]])
}
# Set the drive, load packages and functions.
setwd("M:/PhD_Folder/CaseStudies/Data_analysis/source")
# Load required packages:
library(data.table)
library(dtplyr)
library(dplyr)
library(magrittr)
library(lubridate)
library(ggplot2)
library(reshape2)
library(maptools)
library(plotly)
library(maps)
library(mapproj)
library(sp)
library(caTools)
# Load custom functions:
source("JRT_utils.R")
# Define constants:
folder <- "../../Data_dumps/dump_current_analysis/" # path to folder that holds multiple .csv files, downloaded from nightingale webportal
not.in.use <- c("bluetooth","hardware_info","wearable","wifi")
activity.selection <- c("Still", "Foot", "Vehicle", "Tilting", "Bicycle") # main activity types
to_plot <- c("activity",
"battery",
"exps",
"location",
"screen",
"steps")
users <- list(julia = "93a6d31c-e216-48d8-a9a2-f2f72362548d",
dean = "b1316280-38a6-45e1-9bb9-7afb2a1a2a96",
per = "7bf5fec3-f46f-419e-9573-001fe9b47d81",
verena = "a0c74a88-b293-4b31-92c0-967502b28132",
agzam = "52152dda-0f54-46d1-affa-6dea85f840dc",
anja = "36f9d061-c5e9-4f30-91b2-83351ff40288",
#P01FA = "6321f7ef-a958-44ad-b8e5-5aa04bc004e1",
P03JJ = "e9f44eb5-8962-4894-83c6-783025c6eaea",
P06SS = "f9f24838-c844-42d4-8343-b20ebdd220f3",
P07MG = "4fbfddd0-a346-41c8-be8d-f8804b5068d3",
P08UH = "a85f299e-7a09-4ba7-bc19-8a200c2686c2",
P10JL = "d05fa984-8d3b-4405-b417-211d1a3f50d6",
P13NB = "75cc5240-7805-4550-aeae-873df9984710")
# Select user
userid <- users$P06SS
# Set period of interest
d.start <- as.POSIXct("2018-04-25") # yyyy-mm-dd
d.stop <- as.POSIXct("2018-05-09")
cat("This report is for user ", names(users[users==userid]), "for the time period from ", as.character(d.start), " to ", as.character(d.stop))
datasets.all <- get.data(folder, not.in.use) %>%
lapply(restructure, userid, d.start, d.stop)
datasets.all <- Filter(function(x) !is.null(x)[1],datasets.all) # remove any null dataframes
#test<-filter(datasets.all$activity, user=="f9f24838-c844-42d4-8343-b20ebdd220f3")
for (i in 1:length(datasets.all)){
j <- datasets.all[[i]]
if(!is.null(j)){
cat("Data in ",names(datasets.all)[i],"comes from ", distinct(j,dsource)[,1],"\n");
cat("Last reading in",names(datasets.all)[i],"is on",capture.output(max(j$timestamp)),"\n\n");
}
}
results<-show_plots(datasets.all, to_plot)
for(i in 1:length(results)){
print(results[[i]])
}
# Set the drive, load packages and functions.
setwd("M:/PhD_Folder/CaseStudies/Data_analysis/source")
# Load required packages:
library(data.table)
library(dtplyr)
library(dplyr)
library(magrittr)
library(lubridate)
library(ggplot2)
library(reshape2)
library(maptools)
library(plotly)
library(maps)
library(mapproj)
library(sp)
library(caTools)
# Load custom functions:
source("JRT_utils.R")
# Define constants:
folder <- "../../Data_dumps/dump_current_analysis/" # path to folder that holds multiple .csv files, downloaded from nightingale webportal
not.in.use <- c("bluetooth","hardware_info","wearable","wifi")
activity.selection <- c("Still", "Foot", "Vehicle", "Tilting", "Bicycle") # main activity types
to_plot <- c("activity",
"battery",
"exps",
"location",
"screen",
"steps")
users <- list(julia = "93a6d31c-e216-48d8-a9a2-f2f72362548d",
dean = "b1316280-38a6-45e1-9bb9-7afb2a1a2a96",
per = "7bf5fec3-f46f-419e-9573-001fe9b47d81",
verena = "a0c74a88-b293-4b31-92c0-967502b28132",
agzam = "52152dda-0f54-46d1-affa-6dea85f840dc",
anja = "36f9d061-c5e9-4f30-91b2-83351ff40288",
#P01FA = "6321f7ef-a958-44ad-b8e5-5aa04bc004e1",
P03JJ = "e9f44eb5-8962-4894-83c6-783025c6eaea",
P06SS = "f9f24838-c844-42d4-8343-b20ebdd220f3",
P07MG = "4fbfddd0-a346-41c8-be8d-f8804b5068d3",
P08UH = "a85f299e-7a09-4ba7-bc19-8a200c2686c2",
P10JL = "d05fa984-8d3b-4405-b417-211d1a3f50d6",
P13NB = "75cc5240-7805-4550-aeae-873df9984710")
# Select user
userid <- users$P07MG
# Set period of interest
d.start <- as.POSIXct("2018-04-25") # yyyy-mm-dd
d.stop <- as.POSIXct("2018-05-09")
cat("This report is for user ", names(users[users==userid]), "for the time period from ", as.character(d.start), " to ", as.character(d.stop))
datasets.all <- get.data(folder, not.in.use) %>%
lapply(restructure, userid, d.start, d.stop)
datasets.all <- Filter(function(x) !is.null(x)[1],datasets.all) # remove any null dataframes
#test<-filter(datasets.all$activity, user=="f9f24838-c844-42d4-8343-b20ebdd220f3")
for (i in 1:length(datasets.all)){
j <- datasets.all[[i]]
if(!is.null(j)){
cat("Data in ",names(datasets.all)[i],"comes from ", distinct(j,dsource)[,1],"\n");
cat("Last reading in",names(datasets.all)[i],"is on",capture.output(max(j$timestamp)),"\n\n");
}
}
results<-show_plots(datasets.all, to_plot)
for(i in 1:length(results)){
print(results[[i]])
}
# Set the drive, load packages and functions.
setwd("M:/PhD_Folder/CaseStudies/Data_analysis/source")
# Load required packages:
library(data.table)
library(dtplyr)
library(dplyr)
library(magrittr)
library(lubridate)
library(ggplot2)
library(reshape2)
library(maptools)
library(plotly)
library(maps)
library(mapproj)
library(sp)
library(caTools)
# Load custom functions:
source("JRT_utils.R")
# Define constants:
folder <- "../../Data_dumps/dump_current_analysis/" # path to folder that holds multiple .csv files, downloaded from nightingale webportal
not.in.use <- c("bluetooth","hardware_info","wearable","wifi")
activity.selection <- c("Still", "Foot", "Vehicle", "Tilting", "Bicycle") # main activity types
to_plot <- c("activity",
"battery",
"exps",
"location",
"screen",
"steps")
users <- list(julia = "93a6d31c-e216-48d8-a9a2-f2f72362548d",
dean = "b1316280-38a6-45e1-9bb9-7afb2a1a2a96",
per = "7bf5fec3-f46f-419e-9573-001fe9b47d81",
verena = "a0c74a88-b293-4b31-92c0-967502b28132",
agzam = "52152dda-0f54-46d1-affa-6dea85f840dc",
anja = "36f9d061-c5e9-4f30-91b2-83351ff40288",
#P01FA = "6321f7ef-a958-44ad-b8e5-5aa04bc004e1",
P03JJ = "e9f44eb5-8962-4894-83c6-783025c6eaea",
P06SS = "f9f24838-c844-42d4-8343-b20ebdd220f3",
P07MG = "4fbfddd0-a346-41c8-be8d-f8804b5068d3",
P08UH = "a85f299e-7a09-4ba7-bc19-8a200c2686c2",
P10JL = "d05fa984-8d3b-4405-b417-211d1a3f50d6",
P13NB = "75cc5240-7805-4550-aeae-873df9984710")
# Select user
userid <- users$P08UH
# Set period of interest
d.start <- as.POSIXct("2018-04-25") # yyyy-mm-dd
d.stop <- as.POSIXct("2018-05-09")
cat("This report is for user ", names(users[users==userid]), "for the time period from ", as.character(d.start), " to ", as.character(d.stop))
datasets.all <- get.data(folder, not.in.use) %>%
lapply(restructure, userid, d.start, d.stop)
datasets.all <- Filter(function(x) !is.null(x)[1],datasets.all) # remove any null dataframes
#test<-filter(datasets.all$activity, user=="f9f24838-c844-42d4-8343-b20ebdd220f3")
for (i in 1:length(datasets.all)){
j <- datasets.all[[i]]
if(!is.null(j)){
cat("Data in ",names(datasets.all)[i],"comes from ", distinct(j,dsource)[,1],"\n");
cat("Last reading in",names(datasets.all)[i],"is on",capture.output(max(j$timestamp)),"\n\n");
}
}
results<-show_plots(datasets.all, to_plot)
for(i in 1:length(results)){
print(results[[i]])
}
# Set the drive, load packages and functions.
setwd("M:/PhD_Folder/CaseStudies/Data_analysis/source")
# Load required packages:
library(data.table)
library(dtplyr)
library(dplyr)
library(magrittr)
library(lubridate)
library(ggplot2)
library(reshape2)
library(maptools)
library(plotly)
library(maps)
library(mapproj)
library(sp)
library(caTools)
# Load custom functions:
source("JRT_utils.R")
# Define constants:
folder <- "../../Data_dumps/dump_current_analysis/" # path to folder that holds multiple .csv files, downloaded from nightingale webportal
not.in.use <- c("bluetooth","hardware_info","wearable","wifi")
activity.selection <- c("Still", "Foot", "Vehicle", "Tilting", "Bicycle") # main activity types
to_plot <- c("activity",
"battery",
"exps",
"location",
"screen",
"steps")
users <- list(julia = "93a6d31c-e216-48d8-a9a2-f2f72362548d",
dean = "b1316280-38a6-45e1-9bb9-7afb2a1a2a96",
per = "7bf5fec3-f46f-419e-9573-001fe9b47d81",
verena = "a0c74a88-b293-4b31-92c0-967502b28132",
agzam = "52152dda-0f54-46d1-affa-6dea85f840dc",
anja = "36f9d061-c5e9-4f30-91b2-83351ff40288",
#P01FA = "6321f7ef-a958-44ad-b8e5-5aa04bc004e1",
P03JJ = "e9f44eb5-8962-4894-83c6-783025c6eaea",
P06SS = "f9f24838-c844-42d4-8343-b20ebdd220f3",
P07MG = "4fbfddd0-a346-41c8-be8d-f8804b5068d3",
P08UH = "a85f299e-7a09-4ba7-bc19-8a200c2686c2",
P10JL = "d05fa984-8d3b-4405-b417-211d1a3f50d6",
P13NB = "75cc5240-7805-4550-aeae-873df9984710")
# Select user
userid <- users$P10JL
# Set period of interest
d.start <- as.POSIXct("2018-04-25") # yyyy-mm-dd
d.stop <- as.POSIXct("2018-05-09")
cat("This report is for user ", names(users[users==userid]), "for the time period from ", as.character(d.start), " to ", as.character(d.stop))
datasets.all <- get.data(folder, not.in.use) %>%
lapply(restructure, userid, d.start, d.stop)
datasets.all <- Filter(function(x) !is.null(x)[1],datasets.all) # remove any null dataframes
#test<-filter(datasets.all$activity, user=="f9f24838-c844-42d4-8343-b20ebdd220f3")
for (i in 1:length(datasets.all)){
j <- datasets.all[[i]]
if(!is.null(j)){
cat("Data in ",names(datasets.all)[i],"comes from ", distinct(j,dsource)[,1],"\n");
cat("Last reading in",names(datasets.all)[i],"is on",capture.output(max(j$timestamp)),"\n\n");
}
}
results<-show_plots(datasets.all, to_plot)
for(i in 1:length(results)){
print(results[[i]])
}
# Set the drive, load packages and functions.
setwd("M:/PhD_Folder/CaseStudies/Data_analysis/source")
# Load required packages:
library(data.table)
library(dtplyr)
library(dplyr)
library(magrittr)
library(lubridate)
library(ggplot2)
library(reshape2)
library(maptools)
library(plotly)
library(maps)
library(mapproj)
library(sp)
library(caTools)
# Load custom functions:
source("JRT_utils.R")
# Define constants:
folder <- "../../Data_dumps/dump_current_analysis/" # path to folder that holds multiple .csv files, downloaded from nightingale webportal
not.in.use <- c("bluetooth","hardware_info","wearable","wifi")
activity.selection <- c("Still", "Foot", "Vehicle", "Tilting", "Bicycle") # main activity types
to_plot <- c("activity",
"battery",
"exps",
"location",
"screen",
"steps")
users <- list(julia = "93a6d31c-e216-48d8-a9a2-f2f72362548d",
dean = "b1316280-38a6-45e1-9bb9-7afb2a1a2a96",
per = "7bf5fec3-f46f-419e-9573-001fe9b47d81",
verena = "a0c74a88-b293-4b31-92c0-967502b28132",
agzam = "52152dda-0f54-46d1-affa-6dea85f840dc",
anja = "36f9d061-c5e9-4f30-91b2-83351ff40288",
#P01FA = "6321f7ef-a958-44ad-b8e5-5aa04bc004e1",
P03JJ = "e9f44eb5-8962-4894-83c6-783025c6eaea",
P06SS = "f9f24838-c844-42d4-8343-b20ebdd220f3",
P07MG = "4fbfddd0-a346-41c8-be8d-f8804b5068d3",
P08UH = "a85f299e-7a09-4ba7-bc19-8a200c2686c2",
P10JL = "d05fa984-8d3b-4405-b417-211d1a3f50d6",
P13NB = "75cc5240-7805-4550-aeae-873df9984710")
# Select user
userid <- users$P13NB
# Set period of interest
d.start <- as.POSIXct("2018-04-25") # yyyy-mm-dd
d.stop <- as.POSIXct("2018-05-09")
cat("This report is for user ", names(users[users==userid]), "for the time period from ", as.character(d.start), " to ", as.character(d.stop))
datasets.all <- get.data(folder, not.in.use) %>%
lapply(restructure, userid, d.start, d.stop)
datasets.all <- Filter(function(x) !is.null(x)[1],datasets.all) # remove any null dataframes
#test<-filter(datasets.all$activity, user=="f9f24838-c844-42d4-8343-b20ebdd220f3")
for (i in 1:length(datasets.all)){
j <- datasets.all[[i]]
if(!is.null(j)){
cat("Data in ",names(datasets.all)[i],"comes from ", distinct(j,dsource)[,1],"\n");
cat("Last reading in",names(datasets.all)[i],"is on",capture.output(max(j$timestamp)),"\n\n");
}
}
results<-show_plots(datasets.all, to_plot)
for(i in 1:length(results)){
print(results[[i]])
}
DATA CHECKER
#
#********************************************************************************************
# Author: Julia Thorpe
# Written for AWEAR Case Studies, January-May 2018, as part of an ongoing PhD
# project on Engineering Systems Design in Healthcare at DTU in collaboration
# with Rigshospitalet-Glostrup
# This script imports and plots data from a specified participant and
# timeframe. This is used to regularly check that the data is being recorded and
# looks as expected.
# SETUP -------------------------------------------------------------------------------------------
# Set the drive, load packages and functions.
setwd("M:/PhD_Folder/CaseStudies/Data_analysis/source")
# Load required packages:
# (Note: had trouble installing packages which I resolved by using .libpaths() to find where packages are installed and manually moving the packages from wherever R temporarily installed them to there)
library(data.table)
library(dtplyr)
library(dplyr)
library(magrittr)
library(lubridate)
library(ggplot2)
library(reshape2)
library(maptools)
library(plotly)
library(maps)
library(mapproj)
library(sp)
library(caTools)
library(geosphere) # added in v3
# Load custom functions:
source("JRT_utils.R")
# Define constants:
folder <- "../../Data_dumps/dump_current_analysis/" # path to folder that holds multiple .csv files, downloaded from nightingale webportal
not.in.use <- c("bluetooth","hardware_info","wearable","wifi")
to_plot <- c("activity",
"battery",
"exps",
"location",
"screen",
"steps")
users <- list(julia = "93a6d31c-e216-48d8-a9a2-f2f72362548d",
dean = "b1316280-38a6-45e1-9bb9-7afb2a1a2a96",
per = "7bf5fec3-f46f-419e-9573-001fe9b47d81",
P01FA = "6321f7ef-a958-44ad-b8e5-5aa04bc004e1",
P03JJ = "e9f44eb5-8962-4894-83c6-783025c6eaea")
# SETTINGS -------------------------------------------------------------------------------------------
# Select user and period of interest:
# Test users:
userid <- users$julia
# set the period of interest
d.start <- as.POSIXct("2018-02-11") # yyyy-mm-dd
d.stop <- as.POSIXct("2018-02-18")
# IMPORT AND RESTRUCTURE DATA -------------------------------------------------------------------------------------------
# Notes:
# x = not used (currently not planned for analysis)
# tba = to be added
#
# 1. "activity.csv" -- in use, coded activity types
# 2. "battery.csv" -- in use
# 3. "bluetooth.csv" -- x
# 4. "calllog.csv" -- tba
# 5. "experience_sampling.csv" -- in use, answers to daily self-reports
# 6. "hardware_info.csv" -- x
# 7. "location.csv" -- in use, GPS data from watch and phone
# 8. "screen.csv" -- in use, screen on/off transitions (phone)
# 9. "sms.csv" -- tba
# 10. "step_count.csv" -- in use, step counts from watch and phone
# 11. "wearable.csv" -- not in use, used to be stepcount from watch (empty in dump from 2017-11-28)
# 12. "wifi.csv" -- x
datasets.all <- get.data(folder, not.in.use) %>%
lapply(restructure, userid, d.start, d.stop)
datasets.all <- Filter(function(x) !is.null(x)[1],datasets.all) # remove any null dataframes
remove(d.start, d.stop, folder, not.in.use, userid, users)
location<-datasets.all$location # Get location dataset
# location.projected <- mapproject(location$lon, location$lat,projection = "orthographic") # project GPS data onto 2D plane (currently not in use, need to look into it)
gps.log <- select(location, lat, lon, timestamp, intervals) # Get GPS log file
# trying out code found on Github:
source("git_mobility.R")
library("DataCombine")
library("zoo")
library("plyr")
gps.log %<>% filter(timestamp>=as.POSIXct("2018-02-11"), timestamp<=as.POSIXct("2018-02-12")) # reduce to single day
# to do: create own code for this based on paper
mobility_stay_test<- stayevent(gps.log, coor = c("lon","lat"), time = "timestamp", dist.threshold = 60,
time.threshold = 10, time.units = "mins")
gps.log %<>% cbind(stayeventgroup=mobility_stay_test$stayeventgroup)
View(gps.log)
gps.log$event_group <- is.na(gps.log$stayeventgroup)
?is.na
gps.log$event_group <- is.na(gps.log$stayeventgroup)*1
View(gps.log)
gps.log <- select(location, lat, lon, timestamp, intervals) # Get GPS log file
gps.log %<>% filter(timestamp>=as.POSIXct("2018-02-11"), timestamp<=as.POSIXct("2018-02-12")) # reduce to single day
mobility_stay_test<- stayevent(gps.log, coor = c("lon","lat"), time = "timestamp", dist.threshold = 60,
time.threshold = 10, time.units = "mins")
gps.log %>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup) %>%
mutate(staygo_group=is.na(gps.log$stayeventgroup)*1) %>%
mutate(temp=diff(abs(staygo_group)))
gps.log %>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup)
gps.log %<>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup) %>%
mutate(staygo_group=is.na(gps.log$stayeventgroup)*1) %>%
mutate(temp=diff(abs(staygo_group)))
gps.log %<>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup)  %<>%
mutate(staygo_group=is.na(gps.log$stayeventgroup)*1)  %<>%
mutate(temp=diff(abs(staygo_group)))
gps.log %<>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup)
gps.log %<>%   mutate(staygo_group=is.na(gps.log$stayeventgroup)*1)
gps.log %<>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup)  %<>%
mutate(staygo_group=is.na(gps.log$stayeventgroup)*1
)
gps.log %<>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup)  %<>%
mutate(staygo_group=is.na(gps.log$stayeventgroup)*1)  %<>%
mutate(temp=c(0,diff(abs(staygo_group))))
gps.log <- select(location, lat, lon, timestamp, intervals) # Get GPS log file
gps.log %<>% filter(timestamp>=as.POSIXct("2018-02-11"), timestamp<=as.POSIXct("2018-02-12")) # reduce to single day
mobility_stay_test<- stayevent(gps.log, coor = c("lon","lat"), time = "timestamp", dist.threshold = 60,
time.threshold = 10, time.units = "mins")
gps.log %<>% cbind(stayeventgroup=mobility_stay_test$stayeventgroup)
gps.log$event_group <- is.na(gps.log$stayeventgroup)*1
gps.log %<>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup)  %<>%
mutate(staygo_group=is.na(gps.log$stayeventgroup)*1)  %<>%
mutate(temp=c(0,diff(abs(staygo_group))))
View(gps.log)
gps.log <- select(location, lat, lon, timestamp, intervals) # Get GPS log file
gps.log %<>% filter(timestamp>=as.POSIXct("2018-02-11"), timestamp<=as.POSIXct("2018-02-12")) # reduce to single day
# to do: create own code for this based on paper
mobility_stay_test<- stayevent(gps.log, coor = c("lon","lat"), time = "timestamp", dist.threshold = 60,
time.threshold = 10, time.units = "mins")
gps.log %<>% cbind(stayeventgroup=mobility_stay_test$stayeventgroup)
#gps.log$event_group <- is.na(gps.log$stayeventgroup)*1
gps.log %<>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup)  %<>%
mutate(staygo_group=is.na(gps.log$stayeventgroup)*1)  %<>%
mutate(temp=cumsum(c(0,diff(abs(staygo_group)))))
View(gps.log)
abs(staygo_group)
abs(c(1,-1,0))
gps.log %<>% mutate(stayeventgroup=mobility_stay_test$stayeventgroup)  %<>%
mutate(staygo_group=is.na(gps.log$stayeventgroup)*1)  %<>%
mutate(temp=cumsum(c(0,abs(diff(staygo_group)))))
View(gps.log)
